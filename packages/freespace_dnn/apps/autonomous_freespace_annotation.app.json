{
  "name": "freespace_annotation",
  "modules": [
      "navigation",
      "realsense",
      "superpixels",
      "viewers"
  ],
  "graph": {
    "nodes": [
      {
        "name": "camera",
        "components": [
          {
            "name": "message_ledger",
            "type": "isaac::alice::MessageLedger"
          },
          {
            "name": "left_rgb_pose",
            "type": "isaac::alice::PoseInitializer"
          },
          {
            "name": "realsense",
            "type": "isaac::RealsenseCamera"
          }
        ],
        "start_order": 100
      },
      {
        "name": "viewer",
        "components": [
          {
            "name": "message_ledger",
            "type": "isaac::alice::MessageLedger"
          },
          {
            "name": "depth",
            "type": "isaac::viewers::DepthCameraViewer"
          },
          {
            "name": "color",
            "type": "isaac::viewers::ColorCameraViewer"
          }
        ]
      },
      {
        "name": "freespace",
        "components": [
          {
            "name": "isaac.alice.MessageLedger",
            "type": "isaac::alice::MessageLedger"
          },
          {
            "name": "freespace",
            "type": "isaac::superpixels::RgbdSuperpixelFreespace"
          },
          {
            "name": "labeling",
            "type": "isaac::superpixels::SuperpixelImageLabeling"
          }
        ]
      },
      {
        "name": "create_plan",
        "start_order": -5,
        "components": [
          {
            "name": "message_ledger",
            "type": "isaac::alice::MessageLedger"
          },
          {
            "name": "TravellingSalesman",
            "type": "isaac::navigation::TravellingSalesman"
          },
          {
            "name": "MoveAndScan",
            "type": "isaac::navigation::MoveAndScan"
          }
        ]
      },
      {
        "name": "follow_path",
        "start_order": -1,
        "components": [
          {
            "name": "message_ledger",
            "type": "isaac::alice::MessageLedger"
          },
          {
            "name": "FollowPath",
            "type": "isaac::navigation::FollowPath"
          }
        ]
      },
      {
        "name": "navigation_monitor",
        "components": [
          {
            "name": "message_ledger",
            "type": "isaac::alice::MessageLedger"
          },
          {
            "name": "NavigationMonitor",
            "type": "isaac::navigation::NavigationMonitor"
          }
        ]
      },
      {
        "name": "throttle",
        "components": [
          {
            "name": "message_ledger",
            "type": "isaac::alice::MessageLedger"
          },
          {
            "name": "throttle_color",
            "type": "isaac::alice::Throttle"
          },
          {
            "name": "throttle_depth",
            "type": "isaac::alice::Throttle"
          }
        ]
      },
      {
        "name": "recorder",
        "components": [
          {
            "name": "message_ledger",
            "type": "isaac::alice::MessageLedger"
          },
          {
            "name": "isaac.alice.Recorder",
            "type": "isaac::alice::Recorder"
          }
        ]
      },
      {
        "name": "recorder_bridge",
        "components": [
          {
            "name": "message_ledger",
            "type": "isaac::alice::MessageLedger"
          },
          {
            "name": "RecorderBridge",
            "type": "isaac::alice::RecorderBridge"
          }
        ]
      },
      {
        "name": "2d_carter",
        "subgraph": "apps/carter/2d_carter.subgraph.json"
      },
      {
        "name": "navigation",
        "subgraph": "packages/navigation/apps/differential_base_navigation.subgraph.json"
      },
      {
        "name": "commander",
        "subgraph": "packages/navigation/apps/differential_base_commander.subgraph.json"
      },
      {
        "name": "superpixels",
        "subgraph": "packages/superpixels/apps/superpixels.subgraph.json"
      }
    ],
    "edges": [
      {
        "source": "camera/realsense/color",
        "target": "throttle/throttle_color/color_input"
      },
      {
        "source": "camera/realsense/color",
        "target": "navigation_monitor/NavigationMonitor/camera"
      },
      {
        "source": "navigation_monitor/NavigationMonitor/robot_state",
        "target": "throttle/throttle_color/robot_state"
      },
      {
        "source": "throttle/throttle_color/color",
        "target": "recorder/isaac.alice.Recorder/color"
      },
      {
        "source": "camera/realsense/depth",
        "target": "throttle/throttle_depth/depth_input"
      },
      {
        "source": "navigation_monitor/NavigationMonitor/robot_state",
        "target": "throttle/throttle_depth/robot_state"
      },
      {
        "source": "throttle/throttle_depth/depth",
        "target": "superpixels.subgraph/interface/depth"
      },
      {
        "source": "throttle/throttle_color/color",
        "target": "superpixels.subgraph/interface/color"
      },
      {
        "source": "camera/realsense/color",
        "target": "viewer/color/color_listener"
      },
      {
        "source": "camera/realsense/depth",
        "target": "viewer/depth/depth_listener"
      },
      {
        "source": "superpixels.subgraph/interface/superpixels",
        "target": "freespace/freespace/superpixels"
      },
      {
        "source": "superpixels.subgraph/interface/superpixels",
        "target": "freespace/labeling/superpixels"
      },
      {
        "source": "freespace/freespace/labels",
        "target": "freespace/labeling/labels"
      },
      {
        "source": "freespace/labeling/segmentation",
        "target": "recorder/isaac.alice.Recorder/segmentation"
      },
      {
        "source": "commander.subgraph/interface/command",
        "target": "2d_carter.subgraph/interface/diff_base_command"
      },
      {
        "source": "2d_carter.subgraph/interface/flatscan",
        "target": "navigation.subgraph/interface/flatscan_for_localization"
      },
      {
        "source": "2d_carter.subgraph/interface/flatscan",
        "target": "navigation.subgraph/interface/flatscan_for_obstacles"
      },
      {
        "source": "2d_carter.subgraph/interface/diff_base_state",
        "target": "navigation.subgraph/interface/state"
      },
      {
        "source": "2d_carter.subgraph/interface/imu_raw",
        "target": "navigation.subgraph/interface/imu_raw"
      },
      {
        "source": "navigation.subgraph/interface/command",
        "target": "commander.subgraph/interface/control"
      },
      {
        "source": "websight/WebsightServer/virtual_gamepad",
        "target": "commander.subgraph/interface/virtual_gamepad_request"
      },
      {
        "source": "commander.subgraph/interface/virtual_gamepad_reply",
        "target": "websight/WebsightServer/virtual_gamepad_reply"
      },
      {
        "source": "create_plan/TravellingSalesman/waypoints",
        "target": "create_plan/MoveAndScan/waypoints"
      },
      {
        "source": "create_plan/MoveAndScan/waypoints_with_orientations",
        "target": "follow_path/FollowPath/plan"
      },
      {
        "source": "follow_path/FollowPath/goal",
        "target": "navigation.subgraph/interface/goal"
      },
      {
        "source": "navigation.subgraph/interface/feedback",
        "target": "follow_path/FollowPath/feedback"
      },
      {
        "source": "websight/WebsightServer/record",
        "target": "recorder_bridge/RecorderBridge/request"
      },
      {
        "source": "recorder_bridge/RecorderBridge/reply",
        "target": "websight/WebsightServer/recorder_reply"
      }
    ]
  },
  "config": {
    "camera": {
      "realsense": {
        "rows": 360,
        "cols": 640,
        "rgb_framerate": 15,
        "depth_framerate": 15,
        "align_to_color": true,
        "frame_queue_size": 2,
        "auto_exposure_priority": false
      },
      "left_rgb_pose": {
        "lhs_frame": "robot",
        "rhs_frame": "camera",
        "pose": [0.270598, -0.653281, 0.653281, -0.270598, 0.0, 0.0, 0.775]
      }
    },
    "freespace": {
      "freespace": {
        "ground_frame": "robot",
        "label_freespace": 1,
        "label_obstacle": 0,
        "normal_threshold": 0.25,
        "superpixels_frame": "camera"
      },
      "labeling": {
        "label_invalid": 0.2
      }
    },
    "viewer": {
      "color": {
        "reduce_scale": 2
      },
      "depth": {
        "reduce_scale": 2,
        "min_visualization_depth": 0.2,
        "max_visualization_depth": 5.0,
        "camera_name": "camera",
        "colormap": [
          [128,0,0],
          [255,0,0],
          [255,255,0],
          [0,255,255],
          [0,0,255],
          [0,0,128]
        ]
      },
      "segmentation": {
        "reduce_scale": 2,
        "camera_name": "camera"
      },
      "ir": {
        "reduce_scale": 2
      }
    },
    "follow_path": {
      "FollowPath": {
        "tick_period": "20ms",
        "stationary_wait_time": 10.0,
        "goal_frame": "world",
        "wait_time": 1.0,
        "loop": false
      }
    },
    "create_plan": {
      "TravellingSalesman": {
        "tick_period": "100ms"
      }
    },
    "navigation_monitor": {
      "NavigationMonitor": {
        "distance_threshold": 0.5,
        "tick_period": "1.0",
        "tick_periodically": false,
        "var_rx_speed_pos": "segway_odometry/isaac.navigation.DifferentialBaseOdometry/speed_p",
        "var_rx_speed_rot": "segway_odometry/isaac.navigation.DifferentialBaseOdometry/speed_q"
      }
    },
    "throttle": {
      "throttle_color": {
        "data_channel": "color_input",
        "signal_channel": "robot_state",
        "output_channel": "color"
      },
      "throttle_depth": {
          "data_channel": "depth_input",
          "signal_channel": "robot_state",
          "output_channel": "depth"
      }
    },
    "navigation.control.lqr": {
      "isaac.planner.DifferentialBaseLqrPlanner": {
        "manual_mode_channel": "commander.robot_remote/isaac.navigation.RobotRemoteControl/manual_mode"
      }
    },
    "navigation.control.control": {
      "isaac.planner.DifferentialBaseControl": {
        "manual_mode_channel": "commander.robot_remote/isaac.navigation.RobotRemoteControl/manual_mode"
      }
    },
    "recorder": {
      "isaac.alice.Recorder": {
        "base_directory": "/tmp/path_segmentation/logs",
        "enabled": true
      }
    },
    "recorder_bridge": {
      "RecorderBridge": {
        "recorder_component_name": "recorder/isaac.alice.Recorder",
        "tick_period": "1.0"
      }
    },
    "websight": {
      "WebsightServer": {
        "webroot": "packages/sight/webroot",
        "assetroot": "../isaac-lfs/sight/assets",
        "port": 3000,
        "ui_config": {
          "windows": {
            "Freespace annotation - Waypoints": {
              "renderer": "2d",
              "dims": {
                "width": 432,
                "height": 548
              },
              "channels": [
                {
                  "name": "freespace_annotation/map/occupancy/map",
                  "active": true
                },
                {
                  "name": "freespace_annotation/create_plan/TravellingSalesman/graph",
                  "active": true
                },
                {
                  "name": "freespace_annotation/create_plan/TravellingSalesman/path",
                  "active": true
                },
                {
                  "name": "freespace_annotation/create_plan/TravellingSalesman/waypoints",
                  "active": false
                },
                {
                  "name": "freespace_annotation/follow_path/FollowPath/waypoints",
                  "active": true
                }
              ]
            },
            "Freespace annotation - Global View": {
              "renderer": "2d",
              "dims": {
                "width": 432,
                "height": 548
              },
              "channels": [
                { "name": "freespace_annotation/map/occupancy/map" },
                { "name": "freespace_annotation/navigation.localization.scan_localization/flatscan_viewer/beam_lines" },
                {
                  "name": "freespace_annotation/map/restricted_area/polygons",
                  "active": true
                },
                { "name": "freespace_annotation/map/waypoints/waypoints" },
                { "name": "freespace_annotation/navigation.planner.global_plan/isaac.planner.GlobalPlanner/target" },
                { "name": "freespace_annotation/navigation.planner.global_plan_smoother/smoother/smooth_plan.path" },
                {
                  "name": "freespace_annotation/navigation.localization.global_localization/grid_search_localizer/error",
                  "active": false
                },
                { "name": "freespace_annotation/navigation.localization.scan_localization/robot_viewer/robot" },
                {
                  "name": "freespace_annotation/navigation.localization.scan_localization/flatscan_viewer/beam_endpoints",
                  "active": true
                },
                {
                  "name": "freespace_annotation/navigation.localization.scan_localization/isaac.navigation.ParticleFilterLocalization/particles",
                  "active": true
                }
              ]
            },
            "Freespace Annotation - Freespace": {
              "renderer": "2d",
              "dims": { "width": 640, "height": 480 },
              "channels": [
                { "name": "freespace_annotation/freespace/labeling/labels" }
              ]
            },
            "Freespace Annotation - Color Camera": {
              "renderer": "2d",
              "dims": {
                "width": 640,
                "height": 360
              },
              "channels": [
                { "name": "freespace_annotation/viewer/color/Color" }
              ]
            },
            "Freespace Annotation - Depth Camera": {
              "renderer": "2d",
              "dims": {
                "width": 640,
                "height": 360
              },
              "channels": [
                { "name": "freespace_annotation/viewer/depth/Depth" }
              ]
            }
          }
        }
      }
    }
  }
}
